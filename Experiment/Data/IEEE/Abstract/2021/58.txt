Maintaining the orderliness and efficiency of pedestrian flow through an architectural area is critical for the evacuation process. Especially;  clogs and jams are easily triggered in width-changing areas. In this article;  we consider pedestrian movement in heterogeneous corridors and design an optimal feedback control to regulate pedestrian flow. Flow characteristics are first studied based on microscopic social-force simulations. A Gaussian process describes the relationship between flow variables with the observation data. The macroscopic model for flow in heterogeneous corridors is developed. To avoid jams;  discharges among these corridors are balanced with the narrowest corridor as the primary concern. At the equilibrium;  a continuous-time nonlinear control system is formulated;  and the adaptive dynamic programming learns the optimal feedback controller. Policy iteration (PI) and neural networks are combined together;  and the convergence of neural-network-based PI is demonstrated by analyzing its equivalence to the Gaussâ€“Newton method. Batch normalization is introduced to stabilize the learning process. Simulated experiments demonstrate that the control design can effectively regulate pedestrian flow for both macroscopic and microscopic models. \n<italic xmlns:mml=\http://www.w3.org/1998/Math/MathML\ xmlns:xlink=\http://www.w3.org/1999/xlink\>