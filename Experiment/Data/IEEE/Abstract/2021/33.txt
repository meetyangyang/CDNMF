More natural and intuitive control is expected to maximize the auxiliary effect of the powered prosthetic leg for lower limb amputees. In order to realize the stable and flexible walking of prosthetic legs in different terrains according to human intention;  a brain-computer interface (BCI) based on motor imagery (MI) is developed. For the raw electroencephalogram (EEG) signals;  discrete wavelet transform (DWT) is utilized to extract the time-frequency domain features;  which are used as the input signals of the common spatial pattern (CSP) to obtain the time-frequency-space domain features of EEG signals. Then;  a support vector machine (SVM) classifier and a directed acyclic graph (DAG) structure are combined to classify multiclass imaginary tasks. According to the result of human intention recognition;  the prosthetic leg performs the corresponding gait trajectory generated by coding the ground reaction force (GRF). In addition;  a sensory feedback loop is established by functional electrical stimulation (FES);  which feeds back the movement of the prosthetic leg to human in real time. The effectiveness and feasibility of the developed EEG-based volitional control of powered prosthetic legs have been validated by three subjects;  all of whom were able to fulfill smoothly walking on the floor;  ascending stairs;  and descending stairs according to their own intentions using prosthetic legs. 