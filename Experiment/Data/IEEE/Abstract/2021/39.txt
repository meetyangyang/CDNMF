Smart microgrids are experiencing an increasing growth due to their economic;  social;  and environmental benefits. However;  the inherent intermittency of renewable energy sources (RESs) and users' behavior lead to significant uncertainty;  which implies important challenges on the system design. Facing this issue;  this article proposes a novel robust framework for the day-ahead energy scheduling of a residential microgrid comprising interconnected smart users;  each owning individual RESs;  noncontrollable loads (NCLs);  energy- and comfort-based CLs;  and individual plug-in electric vehicles (PEVs). Moreover;  users share a number of RESs and an energy storage system (ESS). We assume that the microgrid can buy/sell energy from/to the grid subject to quadratic/linear dynamic pricing functions. The objective of scheduling is minimizing the expected energy cost while satisfying device/comfort/contractual constraints;  including feasibility constraints on energy transfer between users and the grid under RES generation and users' demand uncertainties. To this aim;  first;  we formulate a min-max robust problem to obtain the optimal CLs scheduling and charging/discharging strategies of the ESS and PEVs. Then;  based on the duality theory for multi-objective optimization;  we transform the min-max problem into a mixed-integer quadratic programming problem to solve the equivalent robust counterpart of the scheduling problem effectively. We deal with the conservativeness of the proposed approach for different scenarios and quantify the effects of the budget of uncertainty on the cost saving;  the peak-to-average ratio;  and the constraints' violation rate. We validate the effectiveness of the method on a simulated case study and we compare the results with a related robust approach. 