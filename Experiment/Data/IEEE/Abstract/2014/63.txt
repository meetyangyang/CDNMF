This paper addresses the problem of joint facility location and capacity planning of hierarchical service networks in order to determine when and where to open/close service units;  their capacity and the demand-to-facility allocation. We propose a new hierarchical service network model in which both the facilities and customers have nested hierarchies;  i.e.;  a higher level facility provides all services provided by a lower level facility and a customer requiring a certain level of service will additionally require lower level services. Poisson customer arrivals and random service times are assumed. Each service unit is modeled as an Erlang-loss system and its service level;  defined as its customer acceptance probability;  is given by the so-called Erlang-loss function. A nonlinear programming model is proposed to minimize the total cost;  while keeping the service level of all service units above some given level. Different linearization models of the Erlang-loss function and their properties are proposed. Linearization transforms the nonlinear model into compact mixed integer programs solvable to optimality with standard solvers. Application to a real-life perinatal network is then presented. 