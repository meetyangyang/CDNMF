This paper concerns the design of an energy management system for a building cooling system that includes a chiller plant (with two or more chiller units);  a thermal storage unit;  and a cooling load. The latter is modeled in a probabilistic framework to account for the uncertainty in the building occupancy. The energy management task essentially consists in the minimization of the energy consumption of the cooling system;  while preserving comfort in the building. This is achieved by a twofold strategy. The cooling power request is optimally distributed among the chillers and the thermal storage unit. At the same time;  a slight modulation of the temperature set-point of the zone is allowed;  trading energy saving for comfort. The problem can be decoupled into a static optimization problem (mainly addressing the chiller plant optimization) and a dynamic programming (DP) problem for a discrete time stochastic hybrid system (SHS) that takes care of the overall energy minimization. The DP problem is solved by abstracting the SHS to a (finite) controlled Markov chain;  where costs associated with state transitions are computed by simulating the original model and determining the corresponding energy consumption. A numerical example shows the efficacy of the approach. 