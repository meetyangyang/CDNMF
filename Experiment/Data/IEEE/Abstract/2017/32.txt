This paper presents a hierarchical control architecture for the regulation of frequency and nodal voltages of a microgrid in islanded operation. Considering systems with both dispatchable and nondispatchable generation;  as well as noncontrollable loads;  the suggested approach allows to coordinate the MG devices in order to maintain the network variables inside the desired operational ranges. Moreover;  the proposed algorithm;  based on model predictive control;  introduces the possibility to define different resource management strategies while taking into account the constraints of the available devices. Simulation examples are reported and described in the final part of this paper. 