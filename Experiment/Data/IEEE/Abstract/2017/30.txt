This paper presents a hierarchical decision-making strategy for the energy management of a smart city. The proposed decision process supports the city energy manager and local policy makers in taking energy retrofit decisions on different urban sectors by an integrated;  structured;  and transparent management. To this aim;  in the proposed decision strategy;  a bilevel programming model integrates several local decision-making units;  each focusing on the energy retrofit optimization of a specific urban subsystem;  and a central decision unit. We solve the hierarchical decision problem by a game theoretic distributed algorithm. We apply the developed decision model to the case study of the city of Bari (Italy);  where a smart city program has recently been launched. 