In atomic force microscopy (AFM)-based nanomanipulation;  the tip position uncertainties still exist due to the parameter inaccuracies in the open-loop compensation of the piezo scanner;  the noise in the closed-loop control and thermal drift. These spatial uncertainties are very challenging to be directly estimated owing to the lack of real-time feedback;  and its effects are more significant in performing an automatic nanomanipulation/assembly task than macro world manipulations. In this paper;  we propose a stochastic framework for feature-based localization and planning in nanomanipulations to cope with these uncertainties. In the proposed framework;  some features in the sample surface are identified to calculate their positions in statistics;  and detected by using the AFM tip as the sensor itself through a local scan-based motion. In the localization;  the Kalman filter is used through incorporating the tip motion model and the local scan-based observation model to estimate the on-line tip position in the task space. The simulation and experiments about tip positioning are carried out to illustrate the validity and feasibility of the proposed algorithm. Then;  positioning tip for effective nanomanipulation is presented by using several experiments. Finally;  a carbon nanotube is followed to show that the proposed method can provide a great potential for improving the position accuracy. 