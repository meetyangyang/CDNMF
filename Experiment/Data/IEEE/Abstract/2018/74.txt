The development requirements of shared buses are extremely urgent to alleviate urban traffic congestions by improving road resource utilization and to provide a neotype transportation mode with good user experiences. The key to shared bus implementation lies in accurately predicting travel requirements and planning dynamic routes. However;  the sparseness and the high volatility of shared bus data bring a great resistance to accurate prediction of travel requirements. Based on the consideration of user experiences;  optimization objectives of shared bus route planning are significantly different from traditional public transportation and shared bus route planning is far more challenging than online car-hailing services due to the relatively high number of passengers. In this paper;  we put forward a two-stage approach (SubBus);  which is composed of travel requirement prediction and dynamic routes planning;  based on various crowdsourced shared bus data to generate dynamic routes for shared buses in the “last mile” scene. First;  we analyze the resident travel behaviors to obtain five predictive features;  such as flow;  time;  week;  location;  and bus;  and utilize them to predict travel requirements accurately based on a machine learning model. Second;  we design a dynamic programming algorithm to generate dynamic;  optimal routes with fixed destinations for multiple operating buses utilizing prediction results based on operating characteristics of shared buses. Extensive experiments are performed on real crowdsourced shared subway shuttle bus data and demonstrate that SubBus outperforms other methods on dynamic route planning for the “last mile” scene. 