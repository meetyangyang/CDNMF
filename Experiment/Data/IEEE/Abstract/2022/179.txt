Container terminal capacity;  as an important indicator of container terminal competitiveness;  has become a primary concern of port managers;  whereas container flows;  which are supported by quay cranes;  yard cranes;  and automated guided vehicles;  have a substantial influence on container terminal capacity. Container flows are analyzed in this article to estimate the performance of an automated container terminal considering traffic congestion;  unbalanced task assignment;  container batch arrival;  and different berth and yard layouts. The operating system is formulated as a closed-queuing network with four stations. Theoretical analysis and the solution method are adopted to determine system capacity. The resource allocation and system design;  specifically the number of vehicles;  berth and yard layouts;  and task assignment strategy;  are optimized. Numerical experiments are conducted to provide management insights into port capacity planning;  resource optimization;  and layout design. \n<italic xmlns:mml=\http://www.w3.org/1998/Math/MathML\ xmlns:xlink=\http://www.w3.org/1999/xlink\>