Surface defect is a serious problem in real-world manufacturing system and it is important to use vision-based recognition to ensure the surface quality of products. Currently;  due to the ability of automatic feature extraction;  deep learning models;  such as convolutional neural network (CNN);  have been widely used in this area. However;  these CNN-based models may not solve a problem well - inter-class similarities and intra-class variations (ISIV);  which affect their ability of feature extraction and thus influence their recognition performance. To address this problem;  this paper introduces a graph guidance mechanism into CNN to improve the ability of feature extraction;  called Graph guided Convolutional Neural Network (GCNN). Firstly;  GCNN defines a graph by computing the similarities between training samples. Secondly;  the graph is introduced into VGG11;  a popular CNN structure;  to increase the inter-class distances and decrease the intra-class distances between defect samples. Meanwhile;  a learnable coefficient is introduced into the training process to balance the effect of graph guidance automatically. The experimental results on four famous surface defect datasets demonstrate that the graph guidance helps CNN models have better ability of feature extraction and thus achieve better performance. Compared with state-of-the-art models;  the proposed method can achieve the best performance. Furthermore;  the final discussion shows that the learnable coefficient can help the proposed model to gain better performance;  and that the proposed model increases a little computation cost compared to its original CNN model. \n<italic xmlns:mml=\http://www.w3.org/1998/Math/MathML\ xmlns:xlink=\http://www.w3.org/1999/xlink\>