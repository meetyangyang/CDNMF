</i>\n Residential buildings besides commercial and public sectors are among the building sectors responsible for high-energy consumption. Numerous measures have been considered to construct more energy-efficient buildings;  such as implementing new effective insulation materials and increasing the utilization ratio of sunlight. However;  there is also a need for practical solutions to reduce the greenhouse gas emissions and avoid power peak from the residential sector. Under this situation;  energy management system aggregator (EMSA) offers the opportunity to exploit the flexibility potential of various houses and other available distributed energy resources;  promoting their participation in ancillary services and benefiting from rewards and lower energy bills. In this article;  an innovative and comprehensive model predictive control-based scheduling optimization that considers uncertainties of renewable resources and weather conditions is formulated. It can be considered as a practical solution in order to optimally control the operation of a residential community. We proposed a curtailable demand response (DR);  where customers agree to participate in DR programs defined by the EMSA in response to price changes. 
